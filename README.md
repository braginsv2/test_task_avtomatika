# Система обнаружения маркеров

Система для генерации и обнаружения визуальных маркеров с оценкой их положения и ориентации.

## Требования

- Python 3.7+
- OpenCV (cv2)
- NumPy

## Установка зависимостей

```bash
pip install -r requirements.txt
```

## Запуск тестов

Для запуска всех тестов выполните:

```bash
python test.py
```

Это запустит три последовательных теста:

1. **Тест генерации маркера**
   - Создает маркер и сохраняет его в файл `test_marker.png`
   - Показывает сгенерированный маркер
   - Нажмите любую клавишу для продолжения

2. **Тест обнаружения маркера**
   - Загружает сгенерированный маркер
   - Пытается его обнаружить
   - Показывает результат с отмеченными углами
   - Выводит углы поворота и расстояние
   - Нажмите любую клавишу для продолжения

3. **Тест устойчивости к перекрытию**
   - Создает версию маркера с 30% перекрытием
   - Пытается обнаружить перекрытый маркер
   - Показывает результат или обработанное изображение
   - Нажмите любую клавишу для завершения

## Результаты тестов

- Если маркер успешно обнаружен, вы увидите:
  - Зеленый контур вокруг маркера
  - Углы поворота (в градусах)
  - Расстояние до маркера (в метрах)

- Если маркер не обнаружен, вы увидите:
  - Сообщение об ошибке
  - Обработанное изображение для анализа

## Структура проекта

- `marker_generator.py` - генерация маркеров
- `marker_detector.py` - обнаружение маркеров
- `test.py` - тесты системы
- `requirements.txt` - зависимости проекта
- `utils.py` - вспомогательные функции

## Настройка параметров

Основные параметры можно настроить в файлах:

- `marker_generator.py`:
  - Размер маркера
  - Толщина рамки
  - Размер угловых маркеров

- `marker_detector.py`:
  - Пороговые значения
  - Допуски на углы
  - Параметры предварительной обработки



## Использование

1. Генерация метки:
```python
python marker_generator.py --id 1 --output marker.png
```

2. Распознавание метки:
```python
python marker_detector.py --camera 0
``` 