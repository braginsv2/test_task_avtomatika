# Детектор маркеров

Проект для генерации и детектирования визуальных маркеров с возможностью определения их ID, угла поворота и расстояния.

## Функциональность

- Генерация маркеров с уникальным ID
- Детектирование маркеров на изображении
- Определение угла поворота маркера
- Расчет расстояния до маркера
- Визуализация результатов детектирования

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/braginsv2/test_task_avtomatika
cd https://github.com/braginsv2/test_task_avtomatika
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Использование

### Генерация маркера
```python
from marker_generator import MarkerGenerator

generator = MarkerGenerator()
marker = generator.generate_marker(marker_id=1)
cv2.imwrite('marker.png', marker)
```

### Детектирование маркера
```python
from marker_detector import detect_marker

original_img, contour_img, processed_img, angle, distance = detect_marker(image)
print(f"ID маркера: {marker_id}")
print(f"Угол поворота: {angle} градусов")
print(f"Дистанция: {distance:.3f} метров")
```

### Запуск тестов
```bash
python test.py
```

## Тестирование

Тесты включают проверку:
- Детектирования маркеров с разными ID
- Работы с маркерами разных размеров
- Определения угла поворота
- Устойчивости к шуму

## Структура проекта

- `marker_generator.py` - генерация маркеров
- `marker_detector.py` - детектирование маркеров
- `test.py` - тесты функциональности
- `requirements.txt` - зависимости проекта

## Настройка параметров

Основные параметры можно настроить в файлах:

- `marker_generator.py`:
  - Размер маркера
  - Толщина рамки
  - Размер угловых маркеров

- `marker_detector.py`:
  - Пороговые значения
  - Допуски на углы
  - Параметры предварительной обработки

## Результаты тестов

- Если маркер успешно обнаружен, вы увидите:
  - Зеленый контур вокруг маркера
  - Углы поворота (в градусах)
  - Расстояние до маркера (в метрах)

- Если маркер не обнаружен, вы увидите:
  - Сообщение об ошибке
  - Обработанное изображение для анализа

## Настройка параметров

Основные параметры можно настроить в файлах:

- `marker_generator.py`:
  - Размер маркера
  - Толщина рамки
  - Размер угловых маркеров

- `marker_detector.py`:
  - Пороговые значения
  - Допуски на углы
  - Параметры предварительной обработки

## Использование

1. Генерация метки:
```python
python marker_generator.py --id 1 --output marker.png
```

2. Распознавание метки:
```python
python marker_detector.py --camera 0
``` 